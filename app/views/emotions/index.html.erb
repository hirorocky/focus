<% provide :current_page, 'emotions' %>
<section class="section">
  <div class="container">
    <div class="level is-hidden-desktop">
      <div class="level-left">
        <h2 class="title is-3">キモチを懐かしむ</h2>
      </div>
      <div class="level-right"><%= link_to 'キモチと向き合う', new_emotion_path, class: 'button is-link' %></div>
    </div>
    <% if @emotions.count == 0 %>
    <div class="level" id="introduce-create-emotion">
      <div class="level-item">
        まだキモチがありません。右上のボタンから新しいキモチを登録できます。
      </div>
    </div>
    <% else %>
    <% @emotions.each do |emotion| %>
    <div class="box" style="background-color: <%= emotion.color %>;">
      <div class="media-content">
        <div class="content">
          <h4 class="title is-4"><%= emotion.name %></h4>
          <h6 class="subtitle is-6"><%= emotion.created_at_with_format %></h6>
          <div>
            <%= emotion.context %>
          </div>
          <div>
            <% emotion.fragments_tag_content_pairs.each do |fragment| %>
            <div>
              <h4 class="is-4"><%= fragment[:tag] %></h4>
              <h4 class="is-4 is-primary"><%= fragment[:content] %></h4>
            </div>
            <% end %>
          </div>
        </div>
        <nav class="level-right">
          <%= link_to "削除", emotion,
                          method: :delete,
                          data: { confirm: "キモチ「#{emotion.name}」を削除します。よろしいですか？"},
                          class: "btn btn-secondary"
              %>
        </nav>
      </div>
    </div>
    <% end %>
    <% end %>
  </div>
</section>